<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pöhnä Peli</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #1f2120; /* Taustaväri */
            color: #fff; /* Tekstin väri */
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        #difficulty {
            margin: 20px;
            font-size: 24px;
        }

        #gameCanvas {
            position: relative;
            width: 80%;
            height: 80%;
            border: 1px solid #fff;
            background: #000;
        }

        .gameObject {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: pointer;
        }

        .pohna {
            background: url('pohna.png') no-repeat center center;
            background-size: contain;
        }

        .evilpohna {
            background: url('evilpohna.png') no-repeat center center;
            background-size: contain;
        }
    </style>
</head>
<body>
    <div id="difficulty">Vaikeustaso: helppo</div>
    <div id="gameCanvas"></div>

    <script>
        // Difficulty level and game speed settings
        const difficultyLevels = {
            helppo: 1000,
            keskitaso: 600,
            hankala: 400,
            truepöhna: 100
        };

        let difficulty = 'helppo';
        let gameSpeed = difficultyLevels[difficulty];
        let gameInterval;
        let gameOver = false;

        function startGame() {
            const canvas = document.getElementById('gameCanvas');
            canvas.innerHTML = ''; // Clear previous game objects
            let score = 0;
            let missCount = 0;
            let timeSinceLastMove = 0;
            gameOver = false;

            function createObject() {
                if (gameOver) return;

                const gameObject = document.createElement('div');
                gameObject.classList.add('gameObject');
                const isEvil = Math.random() < 0.2; // 20% chance of evilpohna
                gameObject.classList.add(isEvil ? 'evilpohna' : 'pohna');
                gameObject.style.left = `${Math.random() * (canvas.clientWidth - 100)}px`;
                gameObject.style.top = `${Math.random() * (canvas.clientHeight - 100)}px`;
                canvas.appendChild(gameObject);

                gameObject.addEventListener('click', () => {
                    if (gameOver) return;

                    if (isEvil) {
                        gameOver = true;
                        alert('Peli päättyi! Painoit evilpöhnaa.');
                        clearInterval(gameInterval);
                    } else {
                        score++;
                        canvas.removeChild(gameObject);
                        timeSinceLastMove = 0; // Reset the timer on a successful click
                    }
                });
            }

            function update() {
                if (gameOver) return;

                timeSinceLastMove += gameSpeed;
                if (timeSinceLastMove >= gameSpeed) {
                    createObject();
                    timeSinceLastMove = 0;
                }
            }

            gameInterval = setInterval(update, gameSpeed);

            // Update difficulty display
            document.getElementById('difficulty').textContent = `Vaikeustaso: ${difficulty}`;
        }

        function selectDifficulty() {
            const selectedDifficulty = prompt('Valitse vaikeustaso: helppo, keskitaso, hankala', 'helppo');
            if (difficultyLevels[selectedDifficulty]) {
                difficulty = selectedDifficulty;
                gameSpeed = difficultyLevels[difficulty];
                startGame();
            } else {
                alert('Virheellinen vaikeustaso.');
            }
        }

        // Start game on page load and allow difficulty selection
        selectDifficulty();
    </script>
</body>
</html>
